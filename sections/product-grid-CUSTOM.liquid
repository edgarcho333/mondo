<style>
/* მობილური სლაიდერის სტილები */
.product-grid-mobile {
  display: none;
}

@media screen and (max-width: 767px) {
  .product-grid {
    display: none;
  }

  .product-grid-mobile {
    display: block;
    width: 100%;
    padding: 0;
    overflow: hidden;
  }

  .product-grid-mobile .swiper {
    width: 100%;
    padding: 10px 0;
  }

  .product-grid-mobile .swiper-slide {
    width: 85%; /* სლაიდერის სიგანე */
    margin: 0 auto;
  }

  .product-grid-mobile .product-card {
    width: 100%;
    margin: 0;
    box-sizing: border-box;
  }

  .product-grid-mobile .product-image {
    height: 180px;
  }

  .section-title {
    padding: 0 20px;
    text-align: center; /* მობილურზე ტექსტის ცენტრში განლაგება */
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Swiper ინიციალიზაცია მობილურისთვის
  if (window.innerWidth < 768) {
    const swiper = new Swiper('.product-grid-mobile .swiper', {
      slidesPerView: 'auto',
      centeredSlides: true,
      loop: true,
      spaceBetween: 20,
      grabCursor: true,
      initialSlide: 0,
      speed: 600,
      effect: 'slide',
      autoplay: {
        delay: 3000,
        disableOnInteraction: false,
        pauseOnMouseEnter: true
      }
    });
  }

  // ფანჯრის ზომის შეცვლის ივენთი
  window.addEventListener('resize', function() {
    if (window.innerWidth < 768) {
      if (!document.querySelector('.product-grid-mobile .swiper-initialized')) {
        location.reload();
      }
    }
  });
});
</script>

<div class="product-grid-mobile">
  <div class="swiper">
    <div class="swiper-wrapper">
      {% if section.settings.collection != blank %}
        {% assign products = section.settings.collection.products | limit: section.settings.products_to_show %}
        {% for product in products %}
          <div class="swiper-slide">
            <div class="product-card" style="background-color: {{ section.settings.bg_color_1 }}">
              <div class="product-image">
                {{ product.featured_image | image_url: width: 300 | image_tag }}
              </div>
              <div class="product-info">
                <h3>{{ product.title }}</h3>
                <div class="price">
                  {% if product.compare_at_price_max > product.price %}
                    <span class="price-compare">{{ product.compare_at_price_max | money }}</span>
                    <span class="price-sale">{{ product.price | money }}</span>
                  {% else %}
                    <span class="price-regular">{{ product.price | money }}</span>
                  {% endif %}
                </div>
                <button 
                  class="button add-to-cart-button"
                  style="color: {{ section.settings.button_color_1 }}; background-color: {{ section.settings.button_bg_1 }}"
                  data-variant-id="{{ product.variants.first.id }}"
                  {% unless product.available %}disabled{% endunless %}
                >
                  {% if product.available %}
                    ADD TO CART
                  {% else %}
                    SOLD OUT
                  {% endif %}
                </button>
              </div>
            </div>
          </div>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>